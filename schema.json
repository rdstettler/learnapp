[
  {
    "name": "users",
    "sql": "CREATE TABLE users (\n    uid TEXT PRIMARY KEY,\n    email TEXT NOT NULL,\n    display_name TEXT,\n    photo_url TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n, avatar_config TEXT, avatar_svg TEXT, skill_level REAL, learn_level INTEGER, is_admin BOOLEAN DEFAULT 0, language_variant TEXT DEFAULT 'swiss')"
  },
  {
    "name": "telemetry_events",
    "sql": "CREATE TABLE telemetry_events (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    user_uid TEXT NOT NULL,\n    app_id TEXT NOT NULL,\n    event_type TEXT NOT NULL,\n    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n    metadata TEXT,\n    FOREIGN KEY (user_uid) REFERENCES users(uid)\n)"
  },
  {
    "name": "user_metrics",
    "sql": "CREATE TABLE user_metrics (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_uid TEXT NOT NULL,\n            app_id TEXT NOT NULL,\n            open_count INTEGER DEFAULT 0,\n            last_opened DATETIME,\n            UNIQUE(user_uid, app_id),\n            FOREIGN KEY (user_uid) REFERENCES users(uid)\n        )"
  },
  {
    "name": "apps",
    "sql": "CREATE TABLE apps (\n                id TEXT PRIMARY KEY,\n                name TEXT NOT NULL,\n                description TEXT,\n                category TEXT,\n                route TEXT,\n                icon TEXT,\n                tags TEXT,\n                featured BOOLEAN DEFAULT 0,\n                \"min_learn_level\" INTEGER,\n                min_skill_level INTEGER,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            , type TEXT DEFAULT 'tool', data_structure TEXT)"
  },
  {
    "name": "app_results",
    "sql": "CREATE TABLE app_results (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                app_id TEXT NOT NULL,\n                user_uid TEXT NOT NULL,\n                session_id TEXT,\n                content TEXT,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            , processed BOOLEAN DEFAULT 0)"
  },
  {
    "name": "user_apps",
    "sql": "CREATE TABLE user_apps (\n                user_uid TEXT NOT NULL,\n                app_id TEXT NOT NULL,\n                is_favorite BOOLEAN DEFAULT 0,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                PRIMARY KEY (user_uid, app_id)\n            )"
  },
  {
    "name": "app_content",
    "sql": "CREATE TABLE app_content (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                app_id TEXT NOT NULL,\n                data TEXT NOT NULL,\n                level INTEGER,\n                skill_level REAL,\n                ai_generated BOOLEAN DEFAULT 0,\n                human_verified BOOLEAN DEFAULT 0,\n                flag_counter INTEGER DEFAULT 0,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            , ai_reviewed_counter INTEGER DEFAULT 0)"
  },
  {
    "name": "learning_session",
    "sql": "CREATE TABLE learning_session (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_uid TEXT NOT NULL,\n                session_id TEXT NOT NULL,\n                app_id TEXT NOT NULL,\n                content TEXT,\n                order_index INTEGER,\n                pristine BOOLEAN DEFAULT 1,\n                topic TEXT,\n                text TEXT,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            , `theory` text)"
  },
  {
    "name": "learn_results",
    "sql": "CREATE TABLE learn_results (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_uid TEXT NOT NULL,\n            app_id TEXT NOT NULL,\n            score INTEGER NOT NULL,\n            max_score INTEGER NOT NULL,\n            completed_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n            duration_seconds INTEGER,\n            details TEXT,\n            FOREIGN KEY (user_uid) REFERENCES users(uid)\n        )"
  },
  {
    "name": "ai_logs",
    "sql": "CREATE TABLE ai_logs (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_uid TEXT,\n                session_id TEXT,\n                prompt TEXT,\n                system_prompt TEXT,\n                response TEXT,\n                provider TEXT,\n                model TEXT,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            )"
  },
  {
    "name": "feedback",
    "sql": "CREATE TABLE feedback (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_uid TEXT,\n                app_id TEXT NOT NULL,\n                session_id TEXT,\n                content TEXT,\n                comment TEXT,\n                error_type TEXT,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            , target_id TEXT, resolved BOOLEAN DEFAULT 0, resolution_reason TEXT)"
  },
  {
    "name": "user_question_progress",
    "sql": "CREATE TABLE user_question_progress (\n                user_uid TEXT NOT NULL,\n                app_id TEXT NOT NULL,\n                question_hash TEXT NOT NULL,\n                success_count INTEGER DEFAULT 0,\n                failure_count INTEGER DEFAULT 0,\n                last_attempt_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                PRIMARY KEY (user_uid, question_hash)\n            )"
  }
]